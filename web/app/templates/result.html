<img id="image">

<input type="text" placeholder="identifier" id="identifier">
<input type="text" placeholder="interval in second(s)" id="intervalSec">
<button class="button" id="start">Start</button>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"     integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script>

    let button = document.getElementById("start")
    button.addEventListener('click', function(ev) {
                getresult();
                ev.preventDefault();
            }, false);

    function getresult()
    {
        document.getElementById("start").disabled = true; 

        let inputVal = document.getElementById("intervalSec").value;
        let camId = document.getElementById("identifier").value;

        var urlHost = window.location.host
        var urlProtocol = window.location.protocol
        var urlRoot = urlProtocol + "//" + urlHost
        console.log(" ... urlRoot:" + urlRoot)
        const url = urlRoot + "/result/" + camId;

        $.ajax({
            // url: 'http://127.0.0.1:5000/result/'+camId,
            url: url,
            type: 'GET',
            contentType: "image/jpg",
            success: function(result) {
            document.getElementById('image').src = 'data:image/gif;base64,' + result;
            }
        });

        if(inputVal=="")
        {
            console.log("empty string, set interval to 1")
            setTimeout(getresult, 1000);
        }
        else
        {
            let valueInterval = parseInt(inputVal)
            console.log(valueInterval)

            if(valueInterval < 1){
                setTimeout(getresult, 1000);
            }
            else{
                setTimeout(getresult, valueInterval*1000);
            }
        }
    }

</script> 
